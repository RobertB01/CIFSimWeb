<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIF Simulator</title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIF Simulator</title>
    <link rel="stylesheet" href="style.css">


    <!-- D3.js for visualizations -->
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <!-- Custom JavaScript files for parsing and drawing the automaton -->
    <script src="cifparser.js"></script>
    <script src="multi-graph.js"></script>
</head>
<body>


    
    <div class="graph-area" id="graph1" style="border: 2px solid red;">
        <!-- Automaton visualizations for the first automaton will be placed here -->
    </div>
    
    <div class="graph-area" id="graph2" style="border: 2px solid blue;">
        <!-- Automaton visualizations for the second automaton will be placed here -->
    </div>
<div class="output">
    <pre id="consoleOutput">Waiting for simulation output...</pre>
</div>



    <script>
        // CIF content for washing machine automaton
        const wash_cif = `automaton washingMachine:
    event insertCoin, returnCoin, select90, select40, openDoor, closeDoor;
    disc int coins = 0;

    location ready:
        initial; marked;
        edge returnCoin when coins >= 1 do coins := coins -1;
        edge insertCoin do coins := coins +1;
        edge closeDoor goto closedDoors;

    location closedDoors:
        marked;
        edge openDoor goto ready;
        edge returnCoin when coins >= 1 do coins := coins -1;
        edge insertCoin do coins := coins +1;
        edge select40 when coins = 1 do coins := 0 goto washAt40;
        edge select90  when coins = 2 do coins := 0 goto washAt90;

    location washAt90:
        edge openDoor goto ready;

    location washAt40:
        edge openDoor goto ready;
end`;

const phil = `event p1f1, p1f2, p2f1, p2f2,p1f, p2f;

automaton philosopher1:
    location T:
        initial;
        edge p1f1 goto F1;
        edge p1f2 goto F2;

    location F1:
        edge p1f2 goto E;

    location F2:
        edge p1f1 goto E;

    location E:
        edge p1f goto T;
end

automaton philosopher2:
    location T:
        initial;
        edge p2f1 goto F1;
        edge p2f2 goto F2;

    location F1:
        edge p2f2 goto E;

    location F2:
        edge p2f1 goto E;

    location E:
        edge p2f goto T;
end

automaton fork1:
    location I:
        initial;
        edge p1f1 goto P1;
        edge p2f1 goto P2;

    location P1:
        edge p1f goto I;

    location P2:
        edge p2f goto I;
end

automaton fork2:
    location I:
        initial;
        edge p1f2 goto P1;
        edge p2f2 goto P2;

    location P1:
        edge p1f goto I;

    location P2:
        edge p2f goto I;
end
`;



        // Parse the CIF content
        const parsedDataWash = parseCIF(wash_cif);

        // Draw the automaton using the parsed data
        drawAutomaton(parsedDataWash , "#graph1");

        // Parse the CIF content
        const parsedPhil = parseCIF(phil);

        // Draw the automaton using the parsed data
        drawAutomaton(parsedPhil , "#graph2");



    </script>




</body>
</html>
